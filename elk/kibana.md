## Profesor: Edwin Montoya, Universidad EAFIT, Medellín-Colombia
## emontoya@eafit.edu.co

# primeros pasos con Kibana - webinar:

https://www.elastic.co/es/webinars/getting-started-kibana

# instalar:

    AWS EC2: t2.large / 20 GB DD (Recuerde abrir el puerto 5601 en la instancia para conectarse remotamente)

    pre-requisito: https://geekflare.com/install-chromium-ubuntu-centos/ (instalar chromium)

    curl -O https://artifacts.elastic.co/downloads/kibana/kibana-8.5.0-linux-x86_64.tar.gz

    tar -xzf kibana-8.5.0-linux-x86_64.tar.gz

    cd kibana-8.5.0

## descomentar en: config/kibana.yml:

    $ vim config/kibana.yml

    elasticsearch.hosts: ["http://localhost:9200"]
    server.port: 5601
    server.host: "0.0.0.0"

## ejecutar servidor:

    nohup bin/kibana &

## entrar a un browser:

    http://<ip-aws>:5601

    Le pedirá el "Enrollment token", el cual puede observar en el link "Where do I find this":

    EN EL DIRECTORIO DE ELASTICSEARCH, ejecutar:

    cd elasticsearch-8.5.0/
    bin/elasticsearch-create-enrollment-token --scope kibana

genera una salida asi:

[ec2-user@ip-172-31-26-49 elasticsearch-8.5.0]$ bin/elasticsearch-create-enrollment-token --scope kibana
eyJ2ZXIiOiI4LjUuMCIsImFkciI6WyIxNzIuMzEuMjYuNDk6OTIwMCJdLCJmZ3IiOiJhYWE4MGVkOTU3N2MzN2E4MmNmMGMwYTM0MWZlNjU0ODExNmQyZGNmYmViYTEzMjE4ZTQzNDM5ZWYzMjNhZThhIiwia2V5IjoiRHhMM1FvUUJuam5NOEZyYndveEM6VUhNWVdZVHBTZ21vQ1JzUUYyUkwtZyJ9
[ec2-user@ip-172-31-26-49 elasticsearch-8.5.0]$

    copie esa clave, le da 'paste' en kibana:

    LUEGO SOLICITA UN CÓDIGO DE VERIFICACIÓN DE 6 DÍGITOS, QUE SE OBTIENE ASI:

    cd kibana-8.5.0
    bin/kibana-verification-code

GENERA UNA SALIDA ASI:

[ec2-user@ip-172-31-26-49 kibana-8.5.0]$ bin/kibana-verification-code
Your verification code is:  527 244 
[ec2-user@ip-172-31-26-49 kibana-8.5.0]$ 

    Digite esos 6 digitos en el browser de Kibana:

    527 244 

### luego pide un usuario y clave de elastic, se genera asi:

    el username es 'elastic'

    ver: https://www.elastic.co/guide/en/elasticsearch/reference/current/built-in-users.html

    allí hay un comando:



    se resetea la clave con:

    cd elasticsearch-8.5.0/
    bin/elasticsearch-reset-password -u elastic

    saldra una salida asi:

[ec2-user@ip-172-31-26-49 elasticsearch-8.5.0]$ bin/elasticsearch-reset-password -u elastic
This tool will reset the password of the [elastic] user to an autogenerated value.
The password will be printed in the console.
Please confirm that you would like to continue [y/N]y


Password for the [elastic] user successfully reset.
New value: Tdk4e_wB0=UCzID+i0Cr
[ec2-user@ip-172-31-26-49 elasticsearch-8.5.0]$

    la nueva clave sera: Tdk4e_wB0=UCzID+i0Cr



